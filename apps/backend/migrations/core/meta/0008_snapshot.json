{
  "id": "fdf9237e-bd11-4229-a83b-dd75cdd4157b",
  "prevId": "a19ea986-13f7-4eea-b061-bb00efb0e003",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "app.users": {
      "name": "users",
      "schema": "app",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "assessment_pid": {
          "name": "assessment_pid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "auth_provider": {
          "name": "auth_provider",
          "type": "auth_provider[]",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::\"app\".\"auth_provider\"[]"
        },
        "auth_id": {
          "name": "auth_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_type": {
          "name": "user_type",
          "type": "user_type",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false
        },
        "dob": {
          "name": "dob",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "grade": {
          "name": "grade",
          "type": "grade",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false
        },
        "school_level": {
          "name": "school_level",
          "type": "school_level",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "app.get_school_level_from_grade(grade)",
            "type": "stored"
          }
        },
        "status_ell": {
          "name": "status_ell",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "status_frl": {
          "name": "status_frl",
          "type": "free_reduced_lunch_status",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false
        },
        "status_iep": {
          "name": "status_iep",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "student_id": {
          "name": "student_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sis_id": {
          "name": "sis_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state_id": {
          "name": "state_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "local_id": {
          "name": "local_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "race": {
          "name": "race",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hispanic_ethnicity": {
          "name": "hispanic_ethnicity",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "home_language": {
          "name": "home_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exclude_from_research": {
          "name": "exclude_from_research",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "users_email_lower_uniqIdx": {
          "name": "users_email_lower_uniqIdx",
          "columns": [
            {
              "expression": "lower(\"email\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"app\".\"users\".\"email\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_assessmentPid_unique": {
          "name": "users_assessmentPid_unique",
          "nullsNotDistinct": false,
          "columns": ["assessment_pid"]
        },
        "users_authId_unique": {
          "name": "users_authId_unique",
          "nullsNotDistinct": false,
          "columns": ["auth_id"]
        },
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": ["username"]
        }
      },
      "policies": {},
      "checkConstraints": {
        "users_dob_in_past": {
          "name": "users_dob_in_past",
          "value": "\"app\".\"users\".\"dob\" IS NULL OR \"app\".\"users\".\"dob\" <= now()::date"
        }
      },
      "isRLSEnabled": false
    },
    "app.orgs": {
      "name": "orgs",
      "schema": "app",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "abbreviation": {
          "name": "abbreviation",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "org_type": {
          "name": "org_type",
          "type": "org_type",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": true
        },
        "parent_org_id": {
          "name": "parent_org_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "location_address_line1": {
          "name": "location_address_line1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_address_line2": {
          "name": "location_address_line2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_city": {
          "name": "location_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_state_province": {
          "name": "location_state_province",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_postal_code": {
          "name": "location_postal_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_country": {
          "name": "location_country",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "location_lat_long": {
          "name": "location_lat_long",
          "type": "point",
          "primaryKey": false,
          "notNull": false
        },
        "mdr_number": {
          "name": "mdr_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "nces_id": {
          "name": "nces_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state_id": {
          "name": "state_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "school_number": {
          "name": "school_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_rostering_root_org": {
          "name": "is_rostering_root_org",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "rostering_provider": {
          "name": "rostering_provider",
          "type": "rostering_provider",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": true
        },
        "rostering_provider_id": {
          "name": "rostering_provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rostering_ended": {
          "name": "rostering_ended",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "orgs_parent_idx": {
          "name": "orgs_parent_idx",
          "columns": [
            {
              "expression": "parent_org_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "orgs_parent_type_idx": {
          "name": "orgs_parent_type_idx",
          "columns": [
            {
              "expression": "parent_org_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "org_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "orgs_name_lower_idx": {
          "name": "orgs_name_lower_idx",
          "columns": [
            {
              "expression": "(\"name\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "orgs_parent_org_id_orgs_id_fk": {
          "name": "orgs_parent_org_id_orgs_id_fk",
          "tableFrom": "orgs",
          "tableTo": "orgs",
          "schemaTo": "app",
          "columnsFrom": ["parent_org_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "orgs_mdrNumber_unique": {
          "name": "orgs_mdrNumber_unique",
          "nullsNotDistinct": false,
          "columns": ["mdr_number"]
        },
        "orgs_ncesId_unique": {
          "name": "orgs_ncesId_unique",
          "nullsNotDistinct": false,
          "columns": ["nces_id"]
        },
        "orgs_stateId_unique": {
          "name": "orgs_stateId_unique",
          "nullsNotDistinct": false,
          "columns": ["state_id"]
        },
        "orgs_schoolNumber_unique": {
          "name": "orgs_schoolNumber_unique",
          "nullsNotDistinct": false,
          "columns": ["school_number"]
        }
      },
      "policies": {},
      "checkConstraints": {
        "orgs_abbreviation_format": {
          "name": "orgs_abbreviation_format",
          "value": "\"app\".\"orgs\".\"abbreviation\" ~ '^[A-Za-z0-9]+$'"
        }
      },
      "isRLSEnabled": false
    },
    "app.user_orgs": {
      "name": "user_orgs",
      "schema": "app",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "org_id": {
          "name": "org_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": true
        },
        "enrollment_start": {
          "name": "enrollment_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "enrollment_end": {
          "name": "enrollment_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "user_orgs_user_idx": {
          "name": "user_orgs_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_orgs_org_idx": {
          "name": "user_orgs_org_idx",
          "columns": [
            {
              "expression": "org_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_orgs_user_id_users_id_fk": {
          "name": "user_orgs_user_id_users_id_fk",
          "tableFrom": "user_orgs",
          "tableTo": "users",
          "schemaTo": "app",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "user_orgs_org_id_orgs_id_fk": {
          "name": "user_orgs_org_id_orgs_id_fk",
          "tableFrom": "user_orgs",
          "tableTo": "orgs",
          "schemaTo": "app",
          "columnsFrom": ["org_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "user_orgs_pk": {
          "name": "user_orgs_pk",
          "columns": ["user_id", "org_id"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "app.groups": {
      "name": "groups",
      "schema": "app",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "abbreviation": {
          "name": "abbreviation",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "group_type": {
          "name": "group_type",
          "type": "group_type",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": true
        },
        "parent_group_id": {
          "name": "parent_group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "location_address_line1": {
          "name": "location_address_line1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_address_line2": {
          "name": "location_address_line2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_city": {
          "name": "location_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_state_province": {
          "name": "location_state_province",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_postal_code": {
          "name": "location_postal_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "location_country": {
          "name": "location_country",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "location_lat_long": {
          "name": "location_lat_long",
          "type": "point",
          "primaryKey": false,
          "notNull": false
        },
        "rostering_ended": {
          "name": "rostering_ended",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "groups_parent_idx": {
          "name": "groups_parent_idx",
          "columns": [
            {
              "expression": "parent_group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "groups_name_lower_idx": {
          "name": "groups_name_lower_idx",
          "columns": [
            {
              "expression": "(\"name\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "groups_parent_group_id_groups_id_fk": {
          "name": "groups_parent_group_id_groups_id_fk",
          "tableFrom": "groups",
          "tableTo": "groups",
          "schemaTo": "app",
          "columnsFrom": ["parent_group_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "app.user_groups": {
      "name": "user_groups",
      "schema": "app",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "group_id": {
          "name": "group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "user_role",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": true
        },
        "enrollment_start": {
          "name": "enrollment_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "enrollment_end": {
          "name": "enrollment_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "user_groups_user_idx": {
          "name": "user_groups_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "user_groups_group_idx": {
          "name": "user_groups_group_idx",
          "columns": [
            {
              "expression": "group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_groups_user_id_users_id_fk": {
          "name": "user_groups_user_id_users_id_fk",
          "tableFrom": "user_groups",
          "tableTo": "users",
          "schemaTo": "app",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "user_groups_group_id_groups_id_fk": {
          "name": "user_groups_group_id_groups_id_fk",
          "tableFrom": "user_groups",
          "tableTo": "groups",
          "schemaTo": "app",
          "columnsFrom": ["group_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "user_groups_pk": {
          "name": "user_groups_pk",
          "columns": ["user_id", "group_id"]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "app.agreement_type": {
      "name": "agreement_type",
      "schema": "app",
      "values": ["tos", "assent", "consent"]
    },
    "app.assignment_progress": {
      "name": "assignment_progress",
      "schema": "app",
      "values": ["assigned", "started", "completed"]
    },
    "app.auth_provider": {
      "name": "auth_provider",
      "schema": "app",
      "values": ["password", "oidc.clever", "oidc.classlink", "oidc.nycps", "google"]
    },
    "app.class_type": {
      "name": "class_type",
      "schema": "app",
      "values": ["homeroom", "scheduled", "other"]
    },
    "app.free_reduced_lunch_status": {
      "name": "free_reduced_lunch_status",
      "schema": "app",
      "values": ["Free", "Reduced", "Paid"]
    },
    "app.grade": {
      "name": "grade",
      "schema": "app",
      "values": [
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "PreKindergarten",
        "TransitionalKindergarten",
        "Kindergarten",
        "InfantToddler",
        "Preschool",
        "PostGraduate",
        "Ungraded",
        "Other"
      ]
    },
    "app.group_type": {
      "name": "group_type",
      "schema": "app",
      "values": ["cohort", "community", "business"]
    },
    "app.org_type": {
      "name": "org_type",
      "schema": "app",
      "values": ["district", "school", "local", "state", "region"]
    },
    "app.rostering_entity_type": {
      "name": "rostering_entity_type",
      "schema": "app",
      "values": ["org", "class", "course", "user"]
    },
    "app.rostering_provider": {
      "name": "rostering_provider",
      "schema": "app",
      "values": ["classlink", "clever", "dashboard", "nycps", "csv"]
    },
    "app.school_level": {
      "name": "school_level",
      "schema": "app",
      "values": ["early_childhood", "elementary", "middle", "high", "postsecondary"]
    },
    "app.trial_interaction_type": {
      "name": "trial_interaction_type",
      "schema": "app",
      "values": ["focus", "blur", "fullscreen_enter", "fullscreen_exit"]
    },
    "app.user_family_role": {
      "name": "user_family_role",
      "schema": "app",
      "values": ["parent", "child", "guest"]
    },
    "app.user_role": {
      "name": "user_role",
      "schema": "app",
      "values": ["super_admin", "platform_admin", "launch_admin", "admin", "student"]
    },
    "app.user_type": {
      "name": "user_type",
      "schema": "app",
      "values": ["student", "educator", "caregiver", "admin"]
    },
    "app.variant_status": {
      "name": "variant_status",
      "schema": "app",
      "values": ["DRAFT", "PUBLISHED", "DEPRECATED"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
