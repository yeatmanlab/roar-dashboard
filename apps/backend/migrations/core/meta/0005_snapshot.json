{
  "id": "17e1b9d8-26ee-4bf1-b5bf-09b7193217dc",
  "prevId": "411a6b26-4c85-4540-b5a2-dfac8b3ab4ea",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "app.users": {
      "name": "users",
      "schema": "app",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "assessment_pid": {
          "name": "assessment_pid",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "auth_provider": {
          "name": "auth_provider",
          "type": "auth_provider[]",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false
        },
        "auth_id": {
          "name": "auth_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name_first": {
          "name": "name_first",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name_middle": {
          "name": "name_middle",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name_last": {
          "name": "name_last",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_type": {
          "name": "user_type",
          "type": "user_type",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": true
        },
        "dob": {
          "name": "dob",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "grade": {
          "name": "grade",
          "type": "grade",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false
        },
        "school_level": {
          "name": "school_level",
          "type": "school_level",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false,
          "generated": {
            "as": "app.get_school_level_from_grade(grade)",
            "type": "stored"
          }
        },
        "status_ell": {
          "name": "status_ell",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status_frl": {
          "name": "status_frl",
          "type": "free_reduced_lunch_status",
          "typeSchema": "app",
          "primaryKey": false,
          "notNull": false
        },
        "status_iep": {
          "name": "status_iep",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "student_id": {
          "name": "student_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sis_id": {
          "name": "sis_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "state_id": {
          "name": "state_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "local_id": {
          "name": "local_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "race": {
          "name": "race",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hispanic_ethnicity": {
          "name": "hispanic_ethnicity",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "home_language": {
          "name": "home_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exclude_from_research": {
          "name": "exclude_from_research",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "users_email_lower_uniqIdx": {
          "name": "users_email_lower_uniqIdx",
          "columns": [
            {
              "expression": "lower(\"email\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"app\".\"users\".\"email\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_assessmentPid_unique": {
          "name": "users_assessmentPid_unique",
          "nullsNotDistinct": false,
          "columns": ["assessment_pid"]
        },
        "users_authId_unique": {
          "name": "users_authId_unique",
          "nullsNotDistinct": false,
          "columns": ["auth_id"]
        },
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": ["username"]
        },
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": ["email"]
        }
      },
      "policies": {},
      "checkConstraints": {
        "users_dob_in_past": {
          "name": "users_dob_in_past",
          "value": "\"app\".\"users\".\"dob\" IS NULL OR \"app\".\"users\".\"dob\" <= now()::date"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {
    "app.agreement_type": {
      "name": "agreement_type",
      "schema": "app",
      "values": ["tos", "assent", "consent"]
    },
    "app.assessment_stage": {
      "name": "assessment_stage",
      "schema": "app",
      "values": ["practice", "test"]
    },
    "app.assignment_progress": {
      "name": "assignment_progress",
      "schema": "app",
      "values": ["assigned", "started", "completed"]
    },
    "app.auth_provider": {
      "name": "auth_provider",
      "schema": "app",
      "values": ["password", "google", "oidc.clever", "oidc.classlink", "oidc.nycps"]
    },
    "app.class_type": {
      "name": "class_type",
      "schema": "app",
      "values": ["homeroom", "scheduled", "other"]
    },
    "app.free_reduced_lunch_status": {
      "name": "free_reduced_lunch_status",
      "schema": "app",
      "values": ["Free", "Reduced", "Paid"]
    },
    "app.grade": {
      "name": "grade",
      "schema": "app",
      "values": [
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10",
        "11",
        "12",
        "13",
        "PreKindergarten",
        "TransitionalKindergarten",
        "Kindergarten",
        "InfantToddler",
        "Preschool",
        "PostGraduate",
        "Ungraded",
        "Other",
        ""
      ]
    },
    "app.group_type": {
      "name": "group_type",
      "schema": "app",
      "values": ["cohort", "community", "business"]
    },
    "app.org_type": {
      "name": "org_type",
      "schema": "app",
      "values": ["national", "state", "local", "district", "school", "department"]
    },
    "app.rostering_entity_status": {
      "name": "rostering_entity_status",
      "schema": "app",
      "values": ["enrolled", "unenrolled", "failed", "skipped"]
    },
    "app.rostering_entity_type": {
      "name": "rostering_entity_type",
      "schema": "app",
      "values": ["org", "class", "course", "user"]
    },
    "app.rostering_provider": {
      "name": "rostering_provider",
      "schema": "app",
      "values": ["classlink", "clever", "dashboard", "nycps", "csv"]
    },
    "app.school_level": {
      "name": "school_level",
      "schema": "app",
      "values": ["early_childhood", "elementary", "middle", "high", "postsecondary"]
    },
    "app.score_type": {
      "name": "score_type",
      "schema": "app",
      "values": ["computed", "raw"]
    },
    "app.task_variant_status": {
      "name": "task_variant_status",
      "schema": "app",
      "values": ["draft", "published", "deprecated"]
    },
    "app.trial_interaction_type": {
      "name": "trial_interaction_type",
      "schema": "app",
      "values": ["focus", "blur", "fullscreen_enter", "fullscreen_exit"]
    },
    "app.user_family_role": {
      "name": "user_family_role",
      "schema": "app",
      "values": ["parent", "child"]
    },
    "app.user_role": {
      "name": "user_role",
      "schema": "app",
      "values": ["site_administrator", "administrator", "teacher", "student"]
    },
    "app.user_type": {
      "name": "user_type",
      "schema": "app",
      "values": ["student", "educator", "caregiver", "admin"]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
